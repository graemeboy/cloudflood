jQuery(document).ready(function($){var previewOffset=$('#campaign-create-section-preview').offset();$('#campaign-create-section-preview').css('left',previewOffset.left);$(window).scroll(function(){if($(this).scrollTop()>previewOffset.top){$('#campaign-create-section-preview').addClass('preview-fixed');}
else{$('#campaign-create-section-preview').removeClass('preview-fixed');}});var pickerTarget;updateMessagePreview();updateInterfacePreview();$('.campaign-create-picker-btn, .campaign-create-picker-btn span').click(function(e){e.preventDefault();$('#'+$(this).attr('data-target')).iris('show');});$('#campaign-create-checkbox-twitter').change(function(){$('.twitter-signin').toggle();});$('#campaign-create-checkbox-facebook').change(function(){$('.facebook-signin').toggle();});$('.campaign-create-color-picker').each(function(){$(this).iris({change:function(event,ui){pickerTarget=$(this).attr('data-target');if(pickerTarget==='social-intro-background'){$('.social-modal-container, #campaign-message-preview').css('background-color',ui.color.toString());}
else if(pickerTarget==='share-text'){$('.share-text').css('color',ui.color.toString());}else{$('#'+pickerTarget).css('color',ui.color.toString());}
$('#'+pickerTarget+'-preview').css('background-color',ui.color.toString());$('#campaign-create-'+$(this).attr('data-target')+'-btn-text').text(ui.color.toString())}});});listenHideIris();function listenHideIris(){$('#campaign-create').click(function(e){if(!$(e.target).is('input[type="submit"], a')){if(!$(e.target).is(".campaign-create-color-picker, .campaign-create-picker-btn span, .iris-picker, .iris-picker-inner, input[type='checkbox'], label")){$('.campaign-create-color-picker').iris('hide');$('.campaign-create-color-picker').hide();return false;}
$('.campaign-create-color-picker').click(function(){$('.campaign-create-color-picker').iris('hide');$(this).iris('show');return false;});}});}
$('.campaign-create-input').focus(function(){$('.campaign-create-section').removeClass('campaign-create-section-active');$('#campaign-create-section-'+$(this).attr('data-section')).addClass('campaign-create-section-active');});$('#campaign-message, #campaign-link').keyup(function(){updateMessagePreview();});$('#campaign-heading, #campaign-paragraph, #campaign-security').keyup(function(){updateInterfacePreview();});function updateInterfacePreview(){$('#social-intro-heading').text($('#campaign-heading').val());$('#social-intro-paragraph').text($('#campaign-paragraph').val());$('#post-security').text($('#campaign-security').val());}
function updateMessagePreview(){$('#campaign-message-preview').val($('#campaign-message').val()+" "+$('#campaign-link').val());}
$('#campaign-create-form').submit(function(e){e.preventDefault();var data=$(this).serialize();$.ajax({type:"post",url:"process-campaign",data:data}).done(function(msg){alert("Data Saved: "+msg);});});});